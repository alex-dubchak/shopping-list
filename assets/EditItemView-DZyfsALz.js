import{_ as q,u as B,r as g,o as F,a as D,c as y,b as a,w as E,d as o,e as r,f as s,l as j,g as h,v as k,h as A,i as u,j as M,k as T,m as U,n as z,p as L,S as R,q as $,s as C,t as x,x as I,y as d,z as _,A as V,F as G,B as H}from"./index-78JQDzfG.js";const J={class:"min-h-screen flex justify-center bg-gray-100"},K={class:"flex flex-col gap-2 w-full max-w-xl p-4 bg-white rounded-2xl shadow"},O={class:"relative mt-1"},P={class:"relative w-full cursor-default overflow-hidden rounded-lg bg-white text-left shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75 focus-visible:ring-offset-2 focus-visible:ring-offset-teal-300 sm:text-sm"},Q={class:"flex gap-2 justify-end items-center"},W={__name:"EditItemView",setup(X){const l=B(),b=A(),v=D(),m=g(""),f=g(""),p=g(""),w=g(!1),S=async()=>{const i=+v.params.id;if(confirm("Are you sure you want to delete this item?"))await l.deleteItem(i);else return;b.back()},N=async()=>{const i={id:+v.params.id,name:f.value,bought:w.value,note:p.value||null};await l.updateItem(i,m.value),b.back()};return F(async()=>{await l.fetchCategories(),l.categoryFilter="";const i=+v.params.id,e=await l.getItem(i);e&&(m.value=await l.getCategory(e.categoryId),f.value=e.name,w.value=e.bought,p.value=e.note||"")}),(i,e)=>(u(),y("div",J,[a("div",K,[e[9]||(e[9]=a("h2",{class:"text-xl font-semibold mb-4"},"Edit Item",-1)),a("form",{onSubmit:E(N,["prevent"]),class:"space-y-4"},[a("div",null,[o(s(j),{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=t=>m.value=t)},{default:r(()=>[o(s(M),{class:"block font-medium"},{default:r(()=>e[5]||(e[5]=[T("Category")])),_:1,__:[5]}),a("div",O,[a("div",P,[o(s(U),{class:"w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",onChange:e[0]||(e[0]=t=>s(l).categoryFilter=t.target.value),"display-value":t=>(t==null?void 0:t.name)??""},null,8,["display-value"]),o(s(z),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:r(()=>[o(s(L),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),o(s(R),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{default:r(()=>[o(s($),{class:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm"},{default:r(()=>[s(l).queryCategory?(u(),C(s(I),{key:0,value:s(l).queryCategory},{default:r(({selected:t,active:n})=>[a("li",{class:d(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":n,"text-gray-900":!n}])},[a("span",{class:d(["block truncate",{"font-medium":t,"font-normal":!t}])}," Create "+_(s(l).queryCategory.name),3),t?(u(),y("span",{key:0,class:d(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":n,"text-teal-600":!n}])},[o(s(V),{class:"h-5 w-5","aria-hidden":"true"})],2)):x("",!0)],2)]),_:1},8,["value"])):x("",!0),(u(!0),y(G,null,H(s(l).filteredCategories,t=>(u(),C(s(I),{key:t.id,value:t},{default:r(({selected:n,active:c})=>[a("li",{class:d(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":c,"text-gray-900":!c}])},[a("span",{class:d(["block truncate",{"font-medium":n,"font-normal":!n}])},_(t.name),3),n?(u(),y("span",{key:0,class:d(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":c,"text-teal-600":!c}])},[o(s(V),{class:"h-5 w-5","aria-hidden":"true"})],2)):x("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),a("div",null,[e[6]||(e[6]=a("label",{class:"block font-medium"},"Item Name",-1)),h(a("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>f.value=t),class:"w-full border rounded p-2",required:""},null,512),[[k,f.value]])]),a("div",null,[e[7]||(e[7]=a("label",{class:"block font-medium"},"Note (optional)",-1)),h(a("textarea",{"onUpdate:modelValue":e[3]||(e[3]=t=>p.value=t),class:"w-full border rounded p-2",rows:"2",placeholder:"Add any additional details"},null,512),[[k,p.value]])]),a("div",Q,[a("button",{type:"button",onClick:S,class:"bg-red-500 text-white px-4 py-2 rounded mr-auto"}," Delete "),e[8]||(e[8]=a("button",{type:"submit",class:"bg-blue-600 text-white px-4 py-2 rounded"},"Save",-1)),a("button",{type:"button",onClick:e[4]||(e[4]=t=>s(b).back()),class:"bg-gray-300 text-black px-4 py-2 rounded"},"Cancel")])],32)])]))}},Z=q(W,[["__scopeId","data-v-002f4d72"]]);export{Z as default};
