import{_ as N,u as q,r as b,o as B,a as F,c,b as a,w as E,d as o,e as r,f as l,l as M,g as h,v as k,h as T,i as u,j as U,k as j,m as z,n as A,p as D,S as L,q as R,s as C,t as y,x as V,y as i,z as I,A as _,F as $,B as G}from"./index-CJWpkKuk.js";const H={class:"min-h-screen flex justify-center bg-gray-100"},J={class:"flex flex-col gap-2 w-full max-w-xl p-4 bg-white rounded-2xl shadow"},K={class:"relative mt-1"},O={class:"relative w-full cursor-default overflow-hidden rounded-lg bg-white text-left shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75 focus-visible:ring-offset-2 focus-visible:ring-offset-teal-300 sm:text-sm"},P={__name:"EditItemView",setup(Q){const s=q(),v=T(),x=F(),d=b(""),m=b(""),f=b(""),w=b(!1),S=async()=>{const p={id:+x.params.id,name:m.value,bought:w.value,note:f.value||null};await s.updateItem(d.value,p),v.back()};return B(async()=>{await s.fetchCategories(),s.categoryFilter="";const p=+x.params.id,e=await s.getItem(p);e&&(d.value=await s.getCategory(e.categoryId),m.value=e.name,w.value=e.bought,f.value=e.note||"")}),(p,e)=>(u(),c("div",H,[a("div",J,[e[9]||(e[9]=a("h2",{class:"text-xl font-semibold mb-4"},"Edit Item",-1)),a("form",{onSubmit:E(S,["prevent"]),class:"space-y-4"},[a("div",null,[o(l(M),{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=t=>d.value=t)},{default:r(()=>[o(l(U),{class:"block font-medium"},{default:r(()=>e[5]||(e[5]=[j("Category")])),_:1,__:[5]}),a("div",K,[a("div",O,[o(l(z),{class:"w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",onChange:e[0]||(e[0]=t=>l(s).categoryFilter=t.target.value),"display-value":t=>(t==null?void 0:t.name)??""},null,8,["display-value"]),o(l(A),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:r(()=>[o(l(D),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),o(l(L),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{default:r(()=>[o(l(R),{class:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm"},{default:r(()=>[l(s).queryCategory?(u(),C(l(V),{key:0,value:l(s).queryCategory},{default:r(({selected:t,active:n})=>[a("li",{class:i(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":n,"text-gray-900":!n}])},[a("span",{class:i(["block truncate",{"font-medium":t,"font-normal":!t}])}," Create "+I(l(s).queryCategory.name),3),t?(u(),c("span",{key:0,class:i(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":n,"text-teal-600":!n}])},[o(l(_),{class:"h-5 w-5","aria-hidden":"true"})],2)):y("",!0)],2)]),_:1},8,["value"])):y("",!0),(u(!0),c($,null,G(l(s).filteredCategories,t=>(u(),C(l(V),{key:t.id,value:t},{default:r(({selected:n,active:g})=>[a("li",{class:i(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":g,"text-gray-900":!g}])},[a("span",{class:i(["block truncate",{"font-medium":n,"font-normal":!n}])},I(t.name),3),n?(u(),c("span",{key:0,class:i(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":g,"text-teal-600":!g}])},[o(l(_),{class:"h-5 w-5","aria-hidden":"true"})],2)):y("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),a("div",null,[e[6]||(e[6]=a("label",{class:"block font-medium"},"Item Name",-1)),h(a("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>m.value=t),class:"w-full border rounded p-2",required:""},null,512),[[k,m.value]])]),a("div",null,[e[7]||(e[7]=a("label",{class:"block font-medium"},"Note (optional)",-1)),h(a("textarea",{"onUpdate:modelValue":e[3]||(e[3]=t=>f.value=t),class:"w-full border rounded p-2",rows:"2",placeholder:"Add any additional details"},null,512),[[k,f.value]])]),e[8]||(e[8]=a("button",{type:"submit",class:"bg-blue-600 text-white px-4 py-2 rounded"},"Save",-1)),a("button",{type:"button",onClick:e[4]||(e[4]=t=>l(v).back()),class:"bg-gray-300 text-black px-4 py-2 rounded"},"Cancel")],32)])]))}},X=N(P,[["__scopeId","data-v-ed3174be"]]);export{X as default};
